(()=>{"use strict";const t=function(t){t?$("body").addClass("preloader-show"):$("body").removeClass("preloader-show")};var e=$({});function o(e){var o=e.closest(".block__popup");if(o.length){var a=o.find(".block__form-success-popup");a.length&&(a.show(),o.find(".block__popup--head").hide(),o.find(".block__popup--body").hide())}var n=e.closest(".block__form-template--main");if(n.length){var s=n.find(".block__form-template--main-success");s.length&&(s.show(),n.find(".block__form-template--main-row").hide(),n.addClass("sended"))}t(!1)}function a(t){var e=t.attr("type"),o={status:!0,message:!1};return t.val()?"email"!==e||t.val().match(/^[\w\-\.]+@([\w-]+\.)+[\w-]{2,10}$/)?"phone"===e&&(t.val().match(/[a-zA-Zа-яА-ЯёЁ`!@#$%^&*_\=\[\]{};':"\\|,.№<>\/?~]|^(.{25,}$)|(\s{2,})/g)||t.val().length<6)&&(o.status=!1,o.message=cmn_forms.errors.phone):(o.status=!1,o.message=cmn_forms.errors.email):(o.status=!1,o.message=cmn_forms.errors.empty),o}function n(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.removeClass("invalid"),e.find(".block__form--item-error").remove(),!0===t&&(e.addClass("invalid"),o&&e.append('<div class="block__form--item-error">'.concat(o,"</div>")))}function s(t,e){t.removeClass("active"),$("body").removeClass(e.bodyStatus)}window.formEventManager=e,jQuery(document).ready((function(){var c;$("form.block__form").on("submit",(function(s){s.preventDefault();var c,i,r=$(this).closest("form");c=r.find('.block__form--item[data-required="true"]'),i=!0,c.length&&c.each((function(){var t=$(this).attr("data-type");if("text"===t||"email"===t||"phone"===t){var e=a($(this).find("input"));e.status?n(!1,$(this)):(i=!1,n(!0,$(this),e.message))}else if("select"===t){var o=$(this).find("input:checked");if(o.length){var s=parseInt($(this).attr("data-max-count"));"true"===$(this).attr("data-multiple")&&o.length>s?(i=!1,n(!0,$(this),cmn_forms.errors.max_checked.replace("{var}",s))):n(!1,$(this))}else i=!1,n(!0,$(this),cmn_forms.errors.empty)}else"checkbox"===t&&($(this).find("input:checked").length?n(!1,$(this)):(i=!1,n(!0,$(this))))})),i&&function(a){var n=new FormData(a[0]);n.append("nonce_form",cmn_forms.nonce_form),n.append("action",cmn_forms.action),n.append("user_referer",document.location.host+document.location.pathname),function(t){var e,o,a,n,s,c=new URLSearchParams(window.location.search);t.append("utm[utmcampaign]",null!==(e=c.get("utm_campaign"))&&void 0!==e?e:""),t.append("utm[utmsource]",null!==(o=c.get("utm_source"))&&void 0!==o?o:""),t.append("utm[utmmedium]",null!==(a=c.get("utm_medium"))&&void 0!==a?a:""),t.append("utm[utmcontent]",null!==(n=c.get("utm_content"))&&void 0!==n?n:""),t.append("utm[utmterm]",null!==(s=c.get("utm_term"))&&void 0!==s?s:"")}(n),t(!0),jQuery.ajax({url:cmn_forms.ajax_url,type:"POST",data:n,cache:!1,processData:!1,contentType:!1,success:function(t){e.trigger("ajax_success",t),o(a)},error:function(t){e.trigger("ajax_error",t),o(a)}})}(r)})),$('form.block__form input.checkbox[name^="agree"]').on("click",(function(){var t=$(this).closest("form").find('input.checkbox[name^="agree"]:not(:checked)'),e=$(this).closest("form").find('button[type="submit"]');t.length?e.attr("disabled",!0):e.removeAttr("disabled")})),$(".block__form--item").on("click",(function(){n(!1,$(this))})),$('[type="phone"], [type="email"]').on("input",(function(){var t=$(this).closest(".block__form--item");if("phone"===$(this).attr("type")&&$(this).closest("form").find('[data-key="phone_country"]').length&&$(this).val($(this).val().replace(/\+/g,"")),$(this).val()){var e=a($(this));e.status?n(!1,t):n(!0,t,e.message)}else n(!1,t)})),$(document).on("click",".block__form--item-select input.checkbox",(function(){var t=$(this).closest(".block__form--item-select"),e=t.find(".block__form--item-input-field");if("false"===t.attr("data-multiple"))!1===$(this).prop("checked")&&$(this).prop("checked",!0),e.html($(this).siblings("label").html()),e.addClass("active"),t.find(":checked").not(this).prop("checked",!1),t.removeClass("open"),"phone_country"===t.attr("data-key")&&function(t,e){var o=e.val(),a=e.siblings("label").text();if(t.next().length&&"phone"===t.next().attr("data-key")){var n=t.next(),s=n.find(".block__form--item-input-field"),c=parseInt(s.attr("data-padding")),i=n.find(".phone_country"),r=s.offset().top-n.offset().top+15;c||(c=parseInt(s.css("padding-left")),s.attr("data-padding",c)),i.length?(i.html(o),i.css("top",r),i.css("left",c)):n.append('<span class="phone_country" style="top:'.concat(r,"px;left:").concat(c,'px">').concat(o,"</span>"));var l=n.find(".phone_country").outerWidth()+c+5;s.css("padding-left",l);var p=t.find('[name="phone_country_text"]');p.length?p.val(a):t.append('<input type="hidden" name="phone_country_text" value="'.concat(a,'">'))}}(t,$(this));else{var o=t.find(":checked"),a=e.attr("data-text");e.html(a.replace("{var}",o.length)),o.length>0?e.addClass("active"):e.removeClass("active")}})),$(".block__form--item-select .block__form--item-input-field").on("click",(function(){$(this).closest(".block__form--item-select").toggleClass("open")})),$(document).on("click",(function(t){var e=$(t.target).closest(".block__form--item-select");e.length?e.siblings(".block__form--item").length?e.siblings(".block__form--item-select").removeClass("open"):e.closest("form").find(".block__form--item-select .open").not(e).removeClass("open"):$(".block__form--item-select").removeClass("open")})),$((function(){var t=$(".block__form [data-selected]");t.length&&t.each((function(){var t=parseInt($(this).attr("data-selected"));if(t>0){var e=$(this).find(".block__form--item-select-list input");e.length&&e.eq(t-1).trigger("click")}}))})),c={popup:".block__popup",description:".block__popup--head-description",bodyStatus:"popup-show"},$("[data-popup]").on("click",(function(){var t=$(this).attr("data-popup"),e=$('[data-area="'.concat(t,'"]')),o=$(this).attr("data-popup-description");e.length&&($("body").addClass(c.bodyStatus),o&&e.find(c.description).html("<p>".concat(o,"</p>")),e.addClass("active"))})),$("".concat(c.popup,' [data-button="close"]')).on("click",(function(){s($(this).closest(c.popup),c)})),document.addEventListener("click",(function(t){$(t.target).hasClass(c.popup.replace(".",""))&&$(t.target).hasClass("active")&&s($("".concat(c.popup,".active")),c)})),t()}))})()